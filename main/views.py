from django.shortcuts import render, redirect
from .forms import LeadForm

def index(request):
    # ====== –û—Ç–∑—ã–≤—ã ======
    base_reviews = [
        {"name": "–ê–ª–µ–∫—Å–µ–π, –ú–æ—Å–∫–≤–∞", "text": "–†–∞–±–æ—Ç–∞–µ–º –±–æ–ª—å—à–µ –≥–æ–¥–∞, –≤—Å–µ–≥–¥–∞ —á—ë—Ç–∫–æ –ø–æ —Å—Ä–æ–∫–∞–º."},
        {"name": "–ò—Ä–∏–Ω–∞, –ö–∞–∑–∞–Ω—å", "text": "–ü–µ—Ä–≤–∞—è –ø–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ—à–ª–∞ –∏–¥–µ–∞–ª—å–Ω–æ, –≤—Å—ë –æ–±—ä—è—Å–Ω–∏–ª–∏."},
        {"name": "–î–º–∏—Ç—Ä–∏–π, –°–ü–±", "text": "–ì—Ä—É–∑ –ø—Ä–∏—à—ë–ª —Ü–µ–ª—ã–º, –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ –ø–æ—Ä—è–¥–∫–µ."},
        {"name": "–ú–∞–∫—Å–∏–º, –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥", "text": "–û—Ç–ª–∏—á–Ω–æ–µ –∫–∞—Ä–≥–æ, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é."},
        {"name": "–û–ª—å–≥–∞, –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫", "text": "–û—á–µ–Ω—å —É–¥–æ–±–Ω–∞—è —Ä–∞–±–æ—Ç–∞, –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏."},
        {"name": "–ê—Ä—Ç—ë–º, –†–æ—Å—Ç–æ–≤", "text": "–ó–∞–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–≥—É–ª—è—Ä–Ω–æ, –ø—Ä–æ–±–ª–µ–º –Ω–µ –±—ã–ª–æ."},
        {"name": "–ù–∏–∫–∏—Ç–∞, –°–∞–º–∞—Ä–∞", "text": "–¶–µ–Ω—ã –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–µ, —Å–µ—Ä–≤–∏—Å –Ω–∞ —É—Ä–æ–≤–Ω–µ."},
        {"name": "–ï–ª–µ–Ω–∞, –ü–µ—Ä–º—å", "text": "–ü–æ–º–æ–≥–ª–∏ —Å –≤—ã–∫—É–ø–æ–º –∏ –¥–æ—Å—Ç–∞–≤–∫–æ–π."},
        {"name": "–í–ª–∞–¥–∏–º–∏—Ä, –¢—é–º–µ–Ω—å", "text": "–†–∞–±–æ—Ç–∞—é—Ç —á–µ—Å—Ç–Ω–æ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ."},
        {"name": "–°–µ—Ä–≥–µ–π, –ß–µ–ª—è–±–∏–Ω—Å–∫", "text": "–í—Å–µ–≥–¥–∞ –∑–∞—Ä–∞–Ω–µ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—Ç –ø–æ —Å—Ä–æ–∫–∞–º."},
    ]
    reviews = base_reviews * 4  # ~35 –æ—Ç–∑—ã–≤–æ–≤

    # ====== –î–æ—Å—Ç–∞–≤–∫–∞ ======
    deliveries = [
        {"icon": "üö¢", "title": "–î–æ—Å—Ç–∞–≤–∫–∞ –º–æ—Ä–µ–º", "time": "35‚Äì45 –¥–Ω–µ–π", "weight": "–æ—Ç 200 –∫–≥", "price": "–æ—Ç 0,3 $/–∫–≥"},
        {"icon": "üöö", "title": "–î–æ—Å—Ç–∞–≤–∫–∞ –∞–≤—Ç–æ", "time": "15‚Äì18 –¥–Ω–µ–π", "weight": "–æ—Ç 200 –∫–≥", "price": "–æ—Ç 0,7 $/–∫–≥"},
        {"icon": "‚úàÔ∏è", "title": "–î–æ—Å—Ç–∞–≤–∫–∞ –∞–≤–∏–∞", "time": "3‚Äì5 –¥–Ω–µ–π", "weight": "–æ—Ç 20 –∫–≥", "price": "–æ—Ç 7 $/–∫–≥"},
        {"icon": "üì¶", "title": "–°–±–æ—Ä–Ω—ã–µ –≥—Ä—É–∑—ã", "time": "15‚Äì25 –¥–Ω–µ–π", "weight": "–æ—Ç 200 –∫–≥", "price": "–æ—Ç 0,5 $/–∫–≥"},
        {"icon": "üöÜ", "title": "–ñ–î –≠–∫—Å–ø—Ä–µ—Å—Å", "time": "20‚Äì25 –¥–Ω–µ–π", "weight": "–æ—Ç 200 –∫–≥", "price": "–æ—Ç 0,6 $/–∫–≥"},
        {"icon": "üöÜ", "title": "–î–æ—Å—Ç–∞–≤–∫–∞ –ñ–î", "time": "18‚Äì25 –¥–Ω–µ–π", "weight": "–æ—Ç 200 –∫–≥", "price": "–æ—Ç 0,5 $/–∫–≥"},
    ]

    # ====== –§–æ—Ä–º–∞ ======
    success_message = None
    if request.method == "POST":
        form = LeadForm(request.POST)
        if form.is_valid():
            form.save()
            form = LeadForm()  # –æ—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
            success_message = "–°–ø–∞—Å–∏–±–æ, –∑–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞!"
    else:
        form = LeadForm()

    return render(request, "index.html", {
        "reviews": reviews,
        "deliveries": deliveries,
        "form": form,
        "success_message": success_message
    })
